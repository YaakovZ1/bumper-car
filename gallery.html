<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>באמפר קאר אילת | גלריה</title>
    
    <!-- Meta Tags -->
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta http-equiv="pragma" content="no-cache">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="באמפר קאר אילת - גלריה" />
    <meta property="og:description" content="צפו בתמונות מרהיבות מאטרקציית באמפר קאר אילת" />
    <meta property="og:image" content="https://i.ibb.co/Z6473S0/logo-removebg-preview.png" />
    <meta property="og:url" content="https://bumpercar.co.il/gallery.html" />
    <meta property="og:type" content="website" />
    
    <!-- Modern Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#FFF7ED',
                            100: '#FFEDD5',
                            200: '#FED7AA',
                            300: '#FDBA74',
                            400: '#FB923C',
                            500: '#F97316',
                            600: '#EA580C',
                            700: '#C2410C',
                            800: '#9A3412',
                            900: '#7C2D12',
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 1.5s ease-in-out',
                        'slide-in-bottom': 'slideInBottom 0.9s ease-in-out',
                        'slide-in-right': 'slideInRight 0.9s ease-in-out',
                        'slide-in-left': 'slideInLeft 0.9s ease-in-out',
                        'zoom-in': 'zoomIn 0.6s ease-out',
                        'float': 'float 3s ease-in-out infinite',
                        'pulse-slow': 'pulseSlow 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideInBottom: {
                            '0%': { transform: 'translateY(50px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        slideInRight: {
                            '0%': { transform: 'translateX(-50px)', opacity: '0' },
                            '100%': { transform: 'translateX(0)', opacity: '1' },
                        },
                        slideInLeft: {
                            '0%': { transform: 'translateX(50px)', opacity: '0' },
                            '100%': { transform: 'translateX(0)', opacity: '1' },
                        },
                        zoomIn: {
                            '0%': { transform: 'scale(0.9)', opacity: '0' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        pulseSlow: {
                            '0%, 100%': { opacity: '1' },
                            '50%': { opacity: '0.6' },
                        },
                    }
                }
            }
        }
    </script>
    
    <!-- Import Heebo font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <!-- AOS Animation Library -->
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
    
    <!-- Accessibility Script -->
    <script src="https://cdn.enable.co.il/licenses/enable-L304761e05ykaodz-0924-63383/init.js"></script>
    
    <!-- Masonry Layout -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/masonry/4.2.2/masonry.pkgd.min.js"></script>
    
    <!-- ImagesLoaded -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js"></script>
    
    <!-- Lightbox Gallery -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-zoom.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-thumbnail.min.css">
    
    <style>
        html {
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Heebo', sans-serif;
            overflow-x: hidden;
            background-color: #FFF7ED;
        }
        
        ::selection {
            background-color: #F97316;
            color: white;
        }
        
        /* Gallery styles */
        .gallery-container {
            position: relative;
            overflow: hidden;
        }
        
        .gallery-filters {
            position: relative;
            z-index: 10;
        }
        
        .gallery-filter-button {
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
        }
        
        .gallery-filter-button::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, #F97316, #FB923C);
            transition: width 0.3s ease;
            border-radius: 3px;
        }
        
        .gallery-filter-button:hover::before,
        .gallery-filter-button.active::before {
            width: 100%;
        }
        
        .gallery-filter-button.active {
            color: #F97316;
            font-weight: 700;
        }
        
        .gallery-grid {
            transition: height 0.5s ease-in-out;
        }
        
        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform: scale(0.98);
        }
        
        .gallery-item:hover {
            transform: scale(1);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
            z-index: 10;
        }
        
        .gallery-item img {
            transition: all 0.5s ease;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .gallery-item:hover img {
            transform: scale(1.05);
        }
        
        .gallery-item-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(0deg, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 100%);
            padding: 2rem 1rem 1rem;
            color: white;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s ease;
        }
        
        .gallery-item:hover .gallery-item-overlay {
            opacity: 1;
            transform: translateY(0);
        }
        
        .gallery-item-category {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: linear-gradient(45deg, #F97316, #FB923C);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.4s ease;
            z-index: 5;
        }
        
        .gallery-item:hover .gallery-item-category {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Gallery hero section */
        .gallery-hero {
            position: relative;
            height: 60vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .gallery-hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('assets/images/gallery-hero.jpg');
            background-size: cover;
            background-position: center;
            filter: brightness(0.5);
            z-index: 1;
        }
        
        .gallery-hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(0deg, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 100%);
            z-index: 2;
        }
        
        .gallery-hero-content {
            position: relative;
            z-index: 3;
            text-align: center;
            color: white;
        }
        
        /* Decorative elements */
        .circle {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(249, 115, 22, 0.8), rgba(251, 146, 60, 0.8));
            filter: blur(50px);
            z-index: -1;
        }
        
        .circle-1 {
            width: 300px;
            height: 300px;
            top: 20%;
            left: -150px;
            opacity: 0.15;
        }
        
        .circle-2 {
            width: 400px;
            height: 400px;
            bottom: 10%;
            right: -200px;
            opacity: 0.1;
        }
        
        /* Back to top button */
        #backToTop {
            position: fixed;
            bottom: 2rem;
            left: 2rem;
            background: linear-gradient(45deg, #F97316, #FB923C);
            color: white;
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 20px rgba(249, 115, 22, 0.3);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 50;
        }
        
        #backToTop.visible {
            opacity: 1;
            visibility: visible;
        }
        
        /* Loading indicator */
        .loading-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 247, 237, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        
        .loading-spinner {
            width: 70px;
            height: 70px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto;
        }
        
        .loading-spinner:after {
            content: " ";
            display: block;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 6px solid #F97316;
            border-color: #F97316 transparent #F97316 transparent;
            animation: spinner 1.2s linear infinite;
        }
        
        @keyframes spinner {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: #FFF7ED;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #F97316, #FB923C);
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #EA580C, #F97316);
        }
        
        /* Empty state */
        .empty-state {
            display: none;
            text-align: center;
            padding: 3rem;
            background: rgba(255,255,255,0.7);
            border-radius: 16px;
            max-width: 600px;
            margin: 2rem auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }
        
        /* Hide scrollbar for lightgallery */
        .lg-outer {
            scrollbar-width: none;
        }
        
        .lg-outer::-webkit-scrollbar {
            display: none;
        }
        
        /* Counter for gallery items */
        .gallery-counter {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: linear-gradient(45deg, #F97316, #FB923C);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 30px;
            font-weight: 700;
            box-shadow: 0 5px 15px rgba(249, 115, 22, 0.3);
            z-index: 40;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s ease;
        }
        
        .gallery-counter.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Activity Card Styling */
        .activity-card {
            position: relative;
            overflow: hidden;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.4s ease;
        }
        
        .activity-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .activity-card img {
            transition: all 0.5s ease;
        }
        
        .activity-card:hover img {
            transform: scale(1.05);
        }
        
        .activity-card-content {
            position: relative;
            z-index: 2;
            padding: 1.5rem;
            background: white;
        }
        
        .activity-card-title {
            color: #F97316;
            position: relative;
            display: inline-block;
        }
        
        .activity-card-title::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 50px;
            height: 3px;
            background: linear-gradient(90deg, #F97316, #FB923C);
            transition: width 0.3s ease;
        }
        
        .activity-card:hover .activity-card-title::after {
            width: 100%;
        }
        
        .activity-card-category {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: linear-gradient(45deg, rgba(249, 115, 22, 0.9), rgba(251, 146, 60, 0.9));
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 30px;
            font-weight: 700;
            z-index: 5;
        }
        
        /* Gallery Animation Delays */
        .has-animation-delay-100 {
            animation-delay: 0.1s;
        }
        
        .has-animation-delay-200 {
            animation-delay: 0.2s;
        }
        
        .has-animation-delay-300 {
            animation-delay: 0.3s;
        }
        
        .has-animation-delay-400 {
            animation-delay: 0.4s;
        }
        
        .has-animation-delay-500 {
            animation-delay: 0.5s;
        }
    </style>
</head>

<body>
    <!-- Loading Indicator -->
    <div class="loading-container" id="loadingIndicator">
        <div class="loading-spinner"></div>
    </div>
    
    <!-- Decorative elements -->
    <div class="circle circle-1"></div>
    <div class="circle circle-2"></div>
    
    <!-- Header -->
    <div id="header"></div>
    
    <!-- Hero Section -->
    <section class="gallery-hero" id="gallery-hero">
        <div class="gallery-hero-bg"></div>
        <div class="gallery-hero-overlay"></div>
        <div class="gallery-hero-content container mx-auto px-4">
            <h1 class="text-5xl md:text-6xl lg:text-7xl font-extrabold mb-6 animate-fade-in" data-aos="fade-up">גלריית תמונות</h1>
            <p class="text-xl md:text-2xl max-w-3xl mx-auto mb-8 animate-fade-in" style="animation-delay: 0.3s;" data-aos="fade-up" data-aos-delay="200">צפו בתמונות מרהיבות מהאטרקציות והאירועים שלנו!</p>
            <div class="flex justify-center animate-fade-in" style="animation-delay: 0.6s;" data-aos="fade-up" data-aos-delay="400">
                <a href="#gallery-section" class="bg-gradient-to-r from-primary-500 to-primary-600 text-white py-3 px-8 rounded-full text-lg font-bold shadow-lg hover:shadow-xl transition-all hover:-translate-y-1 flex items-center">
                    <span>לגלריה</span>
                    <i class="fas fa-arrow-down mr-2"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- Main Activities -->
    <section class="container mx-auto py-20 px-4">
        <h2 class="text-4xl font-bold text-center mb-6 text-primary-600 relative inline-block mx-auto" data-aos="fade-up">
            <span>פעילויות עיקריות</span>
            <div class="absolute h-1 w-full bg-gradient-to-l from-primary-300 to-primary-600 bottom-0 left-0 transform -translate-y-2"></div>
        </h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto text-center mb-12" data-aos="fade-up" data-aos-delay="100">
            בואו לגלות את מגוון הפעילויות והאטרקציות המיוחדות שלנו
        </p>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div class="activity-card" data-aos="fade-up" data-aos-delay="100" data-album="cars-album">
                <div class="activity-card-category">אטרקציה מרכזית</div>
                <div class="relative overflow-hidden">
                    <img src="assets/images/activity1.jpg" alt="מכוניות מתנגשות" class="w-full h-64 object-cover">
                </div>
                <div class="activity-card-content">
                    <h3 class="activity-card-title text-2xl font-bold mb-4">מכוניות מתנגשות</h3>
                    <p class="text-gray-600">האטרקציה המרכזית בה ילדים יכולים ליהנות מהחוויה של נהיגה והתנגשות זה בזה בסביבה בטוחה ומבוקרת.</p>
                    <button class="mt-4 text-primary-600 font-bold hover:text-primary-700 transition-colors album-button" data-album="cars-album">
                        צפה בתמונות <i class="fas fa-arrow-left mr-1"></i>
                    </button>
                </div>
            </div>
            
            <div class="activity-card" data-aos="fade-up" data-aos-delay="200" data-album="games-album">
                <div class="activity-card-category">משחקים</div>
                <div class="relative overflow-hidden">
                    <img src="assets/images/activity2.jpg" alt="אתגרי משחקים" class="w-full h-64 object-cover">
                </div>
                <div class="activity-card-content">
                    <h3 class="activity-card-title text-2xl font-bold mb-4">אתגרי משחקים</h3>
                    <p class="text-gray-600">מקום מציע מגוון אתגרי משחקים שמעסיקים את הילדים בפעילויות כיפיות ותחרותיות.</p>
                    <button class="mt-4 text-primary-600 font-bold hover:text-primary-700 transition-colors album-button" data-album="games-album">
                        צפה בתמונות <i class="fas fa-arrow-left mr-1"></i>
                    </button>
                </div>
            </div>
            
            <div class="activity-card" data-aos="fade-up" data-aos-delay="300" data-album="events-album">
                <div class="activity-card-category">אירועים</div>
                <div class="relative overflow-hidden">
                    <img src="assets/images/activity3.jpg" alt="אירועים מיוחדים" class="w-full h-64 object-cover">
                </div>
                <div class="activity-card-content">
                    <h3 class="activity-card-title text-2xl font-bold mb-4">אירועים מיוחדים</h3>
                    <p class="text-gray-600">חגיגת יום הולדת, אירוע משפחתי או אירוע חברה - אנחנו מציעים חוויה בלתי נשכחת לכל אירוע.</p>
                    <button class="mt-4 text-primary-600 font-bold hover:text-primary-700 transition-colors album-button" data-album="events-album">
                        צפה בתמונות <i class="fas fa-arrow-left mr-1"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Gallery Section -->
    <section id="gallery-section" class="py-20 bg-gradient-to-b from-primary-50 to-white relative">
        <div class="container mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-6 text-primary-600 relative inline-block mx-auto" data-aos="fade-up">
                <span>הגלריה שלנו</span>
                <div class="absolute h-1 w-full bg-gradient-to-l from-primary-300 to-primary-600 bottom-0 left-0 transform -translate-y-2"></div>
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto text-center mb-12" data-aos="fade-up" data-aos-delay="100">
                צפו בתמונות מאירועים ופעילויות קודמות שלנו
            </p>
            
            <!-- Gallery Filters -->
            <div class="gallery-filters flex flex-wrap justify-center mb-10 gap-4" data-aos="fade-up" data-aos-delay="200">
                <button class="gallery-filter-button px-6 py-3 text-lg font-medium transition-all active" data-filter="all">
                    הכל
                </button>
                <button class="gallery-filter-button px-6 py-3 text-lg font-medium transition-all" data-filter="cars-album">
                    מכוניות מתנגשות
                </button>
                <button class="gallery-filter-button px-6 py-3 text-lg font-medium transition-all" data-filter="games-album">
                    משחקים
                </button>
                <button class="gallery-filter-button px-6 py-3 text-lg font-medium transition-all" data-filter="events-album">
                    אירועים
                </button>
            </div>
            
            <!-- Gallery Grid -->
            <div class="gallery-container" data-aos="fade-up" data-aos-delay="300">
                <!-- Masonry Grid -->
                <div id="gallery-grid" class="gallery-grid">
                    <!-- Images will be inserted here via JavaScript -->
                </div>
                
                <!-- Empty State -->
                <div id="empty-state" class="empty-state">
                    <div class="text-5xl text-primary-300 mb-4">
                        <i class="far fa-images"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">אין תמונות בקטגוריה זו</h3>
                    <p class="text-gray-600">אנא בחר קטגוריה אחרת או צפה בכל התמונות</p>
                </div>
            </div>
            
            <!-- Gallery Counter -->
            <div id="gallery-counter" class="gallery-counter">
                מציג <span id="items-count">0</span> מתוך <span id="total-count">0</span> תמונות
            </div>
        </div>
    </section>

    <!-- Footer -->
    <div id="footer"></div>

    <!-- Back to Top Button -->
    <button id="backToTop" class="fixed bottom-8 left-8 bg-primary-600 text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg opacity-0 invisible transition-all duration-300 z-50">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- LightGallery JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/lightgallery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/plugins/zoom/lg-zoom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script>
    
    <!-- AOS Animation Library -->
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    
    <!-- Custom Scripts -->
    <script>
        // Variables
        let albums = {};
        let currentAlbum = 'all';
        let lgInstance = null;
        let masonryInstance = null;
        
        // DOM Elements
        const galleryGrid = document.getElementById('gallery-grid');
        const emptyState = document.getElementById('empty-state');
        const galleryCounter = document.getElementById('gallery-counter');
        const itemsCount = document.getElementById('items-count');
        const totalCount = document.getElementById('total-count');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const backToTopButton = document.getElementById('backToTop');
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize AOS
            AOS.init({
                duration: 800,
                easing: 'ease-in-out',
                once: true
            });
            
            // Load header
            fetch('header.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('header').innerHTML = data;
                    const hamburger = document.querySelector('.hamburger');
                    const navLinks = document.querySelector('.nav-links');
                    if (hamburger && navLinks) {
                        hamburger.addEventListener('click', () => {
                            navLinks.classList.toggle('active');
                            hamburger.classList.toggle('open');
                        });
                    }
                })
                .catch(error => {
                    console.error('Error loading header:', error);
                });

            // Load footer
            fetch('footer.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('footer').innerHTML = data;
                })
                .catch(error => {
                    console.error('Error loading footer:', error);
                });
            
            // Initialize back to top button
            window.addEventListener('scroll', function() {
                if (window.scrollY > 500) {
                    backToTopButton.classList.remove('opacity-0', 'invisible');
                    backToTopButton.classList.add('opacity-100', 'visible');
                } else {
                    backToTopButton.classList.remove('opacity-100', 'visible');
                    backToTopButton.classList.add('opacity-0', 'invisible');
                }
            });
            
            backToTopButton.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
            
            // Initialize gallery
            initializeGallery();
            
            // Initialize filter buttons
            const filterButtons = document.querySelectorAll('.gallery-filter-button');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Get filter value
                    const filter = this.getAttribute('data-filter');
                    
                    // Filter gallery
                    filterGallery(filter);
                });
            });
            
            // Initialize album buttons
            const albumButtons = document.querySelectorAll('.album-button');
            albumButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const albumName = this.getAttribute('data-album');
                    
                    // Scroll to gallery section
                    document.getElementById('gallery-section').scrollIntoView({ behavior: 'smooth' });
                    
                    // Set active filter
                    setTimeout(() => {
                        const filterButton = document.querySelector(`.gallery-filter-button[data-filter="${albumName}"]`);
                        if (filterButton) {
                            filterButton.click();
                        }
                    }, 1000);
                });
            });
            
            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        const targetPosition = targetElement.offsetTop - 100;
                        
                        window.scrollTo({
                            top: targetPosition,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        });
        
        // Fetch and initialize gallery
        function initializeGallery() {
            // Show loading indicator
            loadingIndicator.style.display = 'flex';
            
            // Fetch albums data
            fetch('list-albums.php')
                .then(response => response.json())
                .then(data => {
                    albums = data;
                    
                    // Create a set to ensure absolute uniqueness of images
                    const uniqueImages = new Set();
                    
                    // Add all images from all albums to the set (normalized)
                    Object.entries(albums).forEach(([albumName, albumImages]) => {
                        albumImages.forEach((imgPath, index) => {
                            // Create a unique identifier for each image including its album
                            const imageData = {
                                src: imgPath,
                                album: albumName,
                                index: index
                            };
                            
                            // Add to unique images set
                            uniqueImages.add(JSON.stringify(imageData));
                        });
                    });
                    
                    // Convert set back to array and parse the JSON strings
                    const allImages = Array.from(uniqueImages).map(imgString => JSON.parse(imgString));
                    
                    // Update the totals
                    totalCount.textContent = allImages.length;
                    
                    // Create gallery items
                    createGalleryItems(allImages);
                    
                    // Initialize masonry layout
                    initializeMasonry();
                    
                    // Initialize lightgallery
                    initializeLightGallery();
                    
                    // Hide loading indicator
                    loadingIndicator.style.opacity = '0';
                    setTimeout(() => {
                        loadingIndicator.style.display = 'none';
                    }, 500);
                    
                    // Show gallery counter
                    galleryCounter.classList.add('visible');
                })
                .catch(error => {
                    console.error('Error fetching albums:', error);
                    
                    // Hide loading indicator
                    loadingIndicator.style.opacity = '0';
                    setTimeout(() => {
                        loadingIndicator.style.display = 'none';
                    }, 500);
                    
                    // Show empty state
                    emptyState.style.display = 'block';
                });
        }
        
        // Create gallery items
        function createGalleryItems(images) {
            galleryGrid.innerHTML = '';
            
            // Create random item sizes for masonry layout
            const sizes = ['small', 'medium', 'large', 'vertical', 'horizontal'];
            
            // Create gallery items
            images.forEach((imageData, index) => {
                // Get random size
                const size = sizes[Math.floor(Math.random() * sizes.length)];
                
                // Create item
                const item = document.createElement('div');
                item.className = `gallery-item ${size} ${imageData.album}`;
                item.setAttribute('data-album', imageData.album);
                item.setAttribute('data-aos', 'zoom-in');
                item.setAttribute('data-aos-delay', (100 + (index % 5) * 100).toString());
                
                // Determine the width and height classes based on size
                let widthClass = 'w-full';
                let heightClass = 'h-80';
                
                if (size === 'large') {
                    widthClass = 'md:col-span-2';
                    heightClass = 'h-96';
                } else if (size === 'vertical') {
                    heightClass = 'h-[500px]';
                } else if (size === 'horizontal') {
                    widthClass = 'md:col-span-2';
                    heightClass = 'h-64';
                } else if (size === 'small') {
                    heightClass = 'h-64';
                }
                
                // Set classes for masonry layout
                item.classList.add(widthClass);
                
                // Create lightgallery structure
                item.innerHTML = `
                    <div class="gallery-item-category">${getAlbumName(imageData.album)}</div>
                    <img src="${imageData.src}" alt="Gallery Image" class="${heightClass} object-cover w-full">
                    <div class="gallery-item-overlay">
                        <h3 class="text-lg font-bold">${getImageTitle(imageData)}</h3>
                    </div>
                `;
                
                // Add to gallery
                galleryGrid.appendChild(item);
            });
            
            // Update items count
            itemsCount.textContent = images.length;
        }
        
        // Initialize masonry layout
        function initializeMasonry() {
            // Check if masonry is already initialized
            if (masonryInstance) {
                masonryInstance.destroy();
            }
            
            // Initialize masonry with imagesLoaded
            const grid = document.querySelector('.gallery-grid');
            imagesLoaded(grid, function() {
                masonryInstance = new Masonry(grid, {
                    itemSelector: '.gallery-item',
                    columnWidth: '.gallery-item',
                    percentPosition: true,
                    gutter: 16,
                    stagger: 30,
                    visibleStyle: { transform: 'translateY(0)', opacity: 1 },
                    hiddenStyle: { transform: 'translateY(100px)', opacity: 0 }
                });
            });
        }
        
        // Initialize LightGallery
        function initializeLightGallery() {
            // Check if lightgallery is already initialized
            if (lgInstance) {
                lgInstance.destroy();
            }
            
            // Initialize lightgallery
            lgInstance = lightGallery(galleryGrid, {
                speed: 500,
                counter: true,
                download: false,
                backdropDuration: 400,
                plugins: [lgThumbnail, lgZoom],
                selector: '.gallery-item',
                getCaptionFromTitleOrAlt: true,
                mobileSettings: {
                    controls: true,
                    showCloseIcon: true,
                    download: false
                }
            });
        }
        
        // Filter gallery
        function filterGallery(filter) {
            currentAlbum = filter;
            
            // Get all gallery items
            const items = document.querySelectorAll('.gallery-item');
            
            // Show or hide items based on filter
            if (filter === 'all') {
                items.forEach(item => {
                    item.style.display = 'block';
                });
                
                // Update counter
                itemsCount.textContent = items.length;
            } else {
                let visibleCount = 0;
                
                items.forEach(item => {
                    if (item.getAttribute('data-album') === filter) {
                        item.style.display = 'block';
                        visibleCount++;
                    } else {
                        item.style.display = 'none';
                    }
                });
                
                // Update counter
                itemsCount.textContent = visibleCount;
                
                // Show empty state if no items
                if (visibleCount === 0) {
                    emptyState.style.display = 'block';
                } else {
                    emptyState.style.display = 'none';
                }
            }
            
            // Update masonry layout
            if (masonryInstance) {
                masonryInstance.layout();
            }
        }
        
        // Helper functions
        function getAlbumName(albumId) {
            switch(albumId) {
                case 'cars-album':
                    return 'מכוניות מתנגשות';
                case 'games-album':
                    return 'משחקים';
                case 'events-album':
                    return 'אירועים';
                default:
                    return 'גלריה';
            }
        }
        
        function getImageTitle(imageData) {
            // Extract file name from path
            const fileName = imageData.src.split('/').pop().split('.')[0];
            
            // Capitalize and replace underscores with spaces
            return fileName.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
        }
    </script>
</body>
</html>